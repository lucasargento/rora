Problem Name: 77_Maximize_Net_Income

Mathematical Formulation:
\begin{align*}
\textbf{Indices and Sets:}\\[1mm]
& i \in \{1,\dots,P\} \quad \text{(products)} \\[2mm]
\textbf{Decision Variables:}\\[1mm]
& x_i \in \mathbb{Z}_+, \quad \text{for } i=1,\dots,P, \quad \text{(number of units of product } i \text{ produced)}\\[1mm]
& y \in \{0,1\}, \quad \text{where } y=1 \text{ if the machinery upgrade is performed, and } y=0 \text{ otherwise.}\\[2mm]
\textbf{Parameters:}\\[1mm]
& P:\, \text{number of products.}\\[1mm]
& \text{Cash} \ge 0:\, \text{initial cash available for investments.}\\[1mm]
& \text{Hour}_i>0:\, \text{machine hours required per unit of product } i, \quad i=1,\dots,P.\\[1mm]
& \text{Cost}_i>0:\, \text{production cost per unit of product } i, \quad i=1,\dots,P.\\[1mm]
& \text{Price}_i>0:\, \text{selling price per unit of product } i, \quad i=1,\dots,P.\\[1mm]
& \text{InvestPercentage}_i \in [0,1]:\, \text{percentage of the sales revenue of product } i \text{ that must be reinvested},\quad i=1,\dots,P.\\[1mm]
& \text{UpgradeHours} \ge 0:\, \text{additional machine hours available if the upgrade is performed.}\\[1mm]
& \text{UpgradeCost} \ge 0:\, \text{cash cost to perform the upgrade.}\\[1mm]
& \text{AvailableHours} \ge 0:\, \text{base machine hours available in the production period.}\\[2mm]
\textbf{Objective Function:}\\[1mm]
\text{Maximize} \quad & Z = \sum_{i=1}^{P} \Bigl[ \Bigl( (1-\text{InvestPercentage}_i)\,\text{Price}_i - \text{Cost}_i \Bigr)x_i \Bigr] - \text{UpgradeCost}\,y.
\end{align*}

\noindent
\textbf{Subject to:}

\begin{align*}
\text{(Cash constraint):} \quad & \sum_{i=1}^{P} \text{Cost}_i\, x_i + \text{UpgradeCost}\, y \le \text{Cash} + \sum_{i=1}^{P} \text{InvestPercentage}_i\, \text{Price}_i\, x_i,\\[1mm]
\text{(Machine capacity constraint):} \quad & \sum_{i=1}^{P} \text{Hour}_i\, x_i \le \text{AvailableHours} + \text{UpgradeHours}\, y,\\[1mm]
\text{(Non-trivial production constraints):} \quad & x_i \ge 1,\quad \forall\, i=1,\dots,P,\\[1mm]
\text{(Variable domains):} \quad & x_i \in \mathbb{Z}_+, \quad \forall\, i=1,\dots,P, \quad y \in \{0,1\}.
\end{align*}

\noindent
\textbf{Explanation:}

1. The decision variable $x_i$ represents the production quantity for product $i$. The constraint $x_i \ge 1$ (instead of allowing zero production) is included to ensure a non‐trivial product mix, so that the solution does not consist of producing only one product. 

2. The binary variable $y$ indicates whether the company invests in upgrading the machine capacity. If $y=1$, the available machine hours are increased by $\text{UpgradeHours}$, and the cash cost $\text{UpgradeCost}$ is incurred.

3. The cash constraint ensures that the sum of the production expenditures plus any upgrade cost does not exceed the sum of the initial cash and the portion of the sales revenues that is available for financing operations. 

4. The machine capacity constraint guarantees that the total hours used in production do not exceed the available hours (which can be increased by the upgrade).

This complete model faithfully translates the problem description into a formal mixed‐integer programming formulation.

Execution Results:
SUCCESS:
Solution:
  x[1] = 1997.0
  x[2] = 1.0
  Upgrade (y) = 1.0
Objective value = 799.6999999999994


Expected Output:
Expected solution

: {'_objective': 654.2}
